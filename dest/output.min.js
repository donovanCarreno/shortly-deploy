var app=require("./server-config.js"),port=4568;app.listen(port),console.log("Server now listening on port "+port);var express=require("express"),partials=require("express-partials"),bodyParser=require("body-parser"),cookieParser=require("cookie-parser"),session=require("express-session"),util=require("./lib/utility"),handler=require("./lib/request-handler"),app=express();app.set("views",__dirname+"/views"),app.set("view engine","ejs"),app.use(partials()),app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!0})),app.use(express["static"](__dirname+"/public")),app.use(cookieParser("shhhh, very secret")),app.use(session({secret:"shhh, it's a secret",resave:!1,saveUninitialized:!0})),app.get("/",util.checkUser,handler.renderIndex),app.get("/create",util.checkUser,handler.renderIndex),app.get("/links",util.checkUser,handler.fetchLinks),app.post("/links",handler.saveLink),app.get("/login",handler.loginUserForm),app.post("/login",handler.loginUser),app.get("/logout",handler.logoutUser),app.get("/signup",handler.signupUserForm),app.post("/signup",handler.signupUser),app.get("/*",handler.navToLink),module.exports=app;